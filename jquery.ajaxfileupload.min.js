(function(c){c.extend({createUploadIframe:function(a,b){a="jUploadFrame"+a;a=c('<iframe id="'+a+'" name="'+a+'" />');window.ActiveXObject&&("boolean"===typeof b?a.attr({src:"javascript:false"}):"string"===typeof b&&a.attr({src:b}));a.css({position:"absolute",top:"-9000px",left:"-9000px"}).appendTo("body");return a},createUploadForm:function(a,b){var d="jUploadForm"+a;a="jUploadFile"+a;d=c('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>');b=c("#"+b);var f=
b.parent();b.clone().appendTo(f);b.attr("id",a).appendTo(d);d.css({position:"absolute",top:-9999,left:-9999}).appendTo("body");return d},addOtherRequestsToForm:function(a,b){var d=c('<input type="hidden" name="" value="" />'),f;for(f in b){name=f;value=b[f];var g=d.clone();g.attr({name:name,value:value});c(g).appendTo(a)}return a},ajaxFileUpload:function(a){function b(d){var b=document.getElementById(g);try{b.contentWindow?(e.responseText=b.contentWindow.document.body?b.contentWindow.document.body.innerHTML:
null,e.responseXML=b.contentWindow.document.XMLDocument?b.contentWindow.document.XMLDocument:b.contentWindow.document):b.contentDocument&&(e.responseText=b.contentDocument.document.body?b.contentDocument.document.body.innerHTML:null,e.responseXML=b.contentDocument.document.XMLDocument?b.contentDocument.document.XMLDocument:b.contentDocument.document)}catch(l){c.handleError(a,e,null,l)}if(e||"timeout"==d){m=!0;var h;try{if(h="timeout"!=d?"success":"error","error"!=h){var k=c.uploadHttpData(e,a.dataType);
a.success&&a.success(k,h);a.global&&c.event.trigger("ajaxSuccess",[e,a])}else c.handleError(a,e,h)}catch(l){h="error",c.handleError(a,e,h,l)}a.global&&c.event.trigger("ajaxComplete",[e,a]);a.global&&!--c.active&&c.event.trigger("ajaxStop");a.complete&&a.complete(e,h);c(b).off();try{setTimeout(function(){c(b).remove();c(f).remove()},100)}catch(l){c.handleError(a,e,null,l)}e=null}}a=c.extend({},c.ajaxSettings,a);var d=(new Date).getTime(),f=c.createUploadForm(d,a.fileElementId);a.data&&(f=c.addOtherRequestsToForm(f,
a.data));c.createUploadIframe(d,a.secureuri);var g="jUploadFrame"+d,d="jUploadForm"+d;a.global&&!c.active++&&c.event.trigger("ajaxStart");var m=!1,e={};a.global&&c.event.trigger("ajaxSend",[e,a]);0<a.timeout&&setTimeout(function(){m||b("timeout")},a.timeout);try{var k=c("#"+d).attr({action:a.url,method:"POST",target:g});k.encoding?k.encoding="multipart/form-data":k.enctype="multipart/form-data";k.submit()}catch(n){c.handleError(a,e,null,n)}window.attachEvent?document.getElementById(g).attachEvent("onload",
b):document.getElementById(g).addEventListener("load",b,!1);return{abort:function(){}}},uploadHttpData:function(a,b){var d;d="xml"!=b&&b?a.responseText:a.responseXML;if("script"==b)c.globalEval(d);else if("json"==b){d=a.responseText;a=d.indexOf(">");0<=a&&(b=d.indexOf("<",a+1),0<=b&&(d=d.substring(a+1,b)));try{d=JSON.parse(d)}catch(f){c.handleError("Response data error.",d,null,f)}}else"html"==b&&c("<div>").html(d).evalScripts();return d},handleError:function(a,b,d,c){console&&console.error&&console.error(a,
b,d,c)}})})(jQuery);