(function(c){c.extend({createUploadIframe:function(a,d){a="jUploadFrame"+a;a=c('<iframe id="'+a+'" name="'+a+'" />');window.ActiveXObject&&("boolean"===typeof d?a.attr({src:"javascript:false"}):"string"===typeof d&&a.attr({src:d}));a.css({position:"absolute",top:"-9000px",left:"-9000px"}).appendTo("body");return a},createUploadForm:function(a,d){a="jUploadForm"+a;a=c('<form  action="" method="POST" name="'+a+'" id="'+a+'" enctype="multipart/form-data"></form>');d=c("#"+d);d=c(d).clone();c(d).appendTo(a);
c(a).css({position:"absolute",top:-9999,left:-9999}).appendTo("body");return a},addOtherRequestsToForm:function(a,d){var b=c('<input type="hidden" name="" value="" />'),f;for(f in d){name=f;value=d[f];var g=b.clone();g.attr({name:name,value:value});c(g).appendTo(a)}return a},ajaxFileUpload:function(a){function d(d){var b=document.getElementById(g);try{b.contentWindow?(e.responseText=b.contentWindow.document.body?b.contentWindow.document.body.innerHTML:null,e.responseXML=b.contentWindow.document.XMLDocument?
b.contentWindow.document.XMLDocument:b.contentWindow.document):b.contentDocument&&(e.responseText=b.contentDocument.document.body?b.contentDocument.document.body.innerHTML:null,e.responseXML=b.contentDocument.document.XMLDocument?b.contentDocument.document.XMLDocument:b.contentDocument.document)}catch(l){c.handleError(a,e,null,l)}if(e||"timeout"==d){m=!0;var h;try{if(h="timeout"!=d?"success":"error","error"!=h){var k=c.uploadHttpData(e,a.dataType);a.success&&a.success(k,h);a.global&&c.event.trigger("ajaxSuccess",
[e,a])}else c.handleError(a,e,h)}catch(l){h="error",c.handleError(a,e,h,l)}a.global&&c.event.trigger("ajaxComplete",[e,a]);a.global&&!--c.active&&c.event.trigger("ajaxStop");a.complete&&a.complete(e,h);c(b).off();try{setTimeout(function(){c(b).remove();c(f).remove()},100)}catch(l){c.handleError(a,e,null,l)}e=null}}a=c.extend({},c.ajaxSettings,a);var b=(new Date).getTime(),f=c.createUploadForm(b,a.fileElementId);a.data&&(f=c.addOtherRequestsToForm(f,a.data));c.createUploadIframe(b,a.secureuri);var g=
"jUploadFrame"+b,b="jUploadForm"+b;a.global&&!c.active++&&c.event.trigger("ajaxStart");var m=!1,e={};a.global&&c.event.trigger("ajaxSend",[e,a]);0<a.timeout&&setTimeout(function(){m||d("timeout")},a.timeout);try{var k=c("#"+b).attr({action:a.url,method:"POST",target:g});k.encoding?k.encoding="multipart/form-data":k.enctype="multipart/form-data";k.submit()}catch(n){c.handleError(a,e,null,n)}window.attachEvent?document.getElementById(g).attachEvent("onload",d):document.getElementById(g).addEventListener("load",
d,!1);return{abort:function(){}}},uploadHttpData:function(a,d){var b;b="xml"!=d&&d?a.responseText:a.responseXML;if("script"==d)c.globalEval(b);else if("json"==d){b=a.responseText;a=b.indexOf(">");0<=a&&(d=b.indexOf("<",a+1),0<=d&&(b=b.substring(a+1,d)));try{b=JSON.parse(b)}catch(f){c.handleError("Response data error.",b,null,f)}}else"html"==d&&c("<div>").html(b).evalScripts();return b},handleError:function(a,c,b,f){console&&console.error&&console.error(a,c,b,f)}})})(jQuery);