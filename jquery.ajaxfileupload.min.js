(function(c){c.extend({createUploadIframe:function(a,c){a="jUploadFrame"+a;if(window.ActiveXObject){var b=document.createElement('<iframe id="'+a+'" name="'+a+'" />');"boolean"===typeof c?b.src="javascript:false":"string"===typeof c&&(b.src=c)}else b=document.createElement("iframe"),b.id=a,b.name=a;b.style.position="absolute";b.style.top="-9000px";b.style.left="-9000px";document.body.appendChild(b);return b},createUploadForm:function(a,d){var b="jUploadForm"+a;a="jUploadFile"+a;b=c('<form  action="" method="POST" name="'+
b+'" id="'+b+'" enctype="multipart/form-data"></form>');d=c("#"+d);var f=c(d).clone();c(d).attr("id",a).before(f).appendTo(b);c(b).css({position:"absolute",top:-9999,left:-9999}).appendTo("body");return b},addOtherRequestsToForm:function(a,d){var b=c('<input type="hidden" name="" value="" />'),f;for(f in d){name=f;value=d[f];var g=b.clone();g.attr({name:name,value:value});c(g).appendTo(a)}return a},ajaxFileUpload:function(a){function d(b){var d=document.getElementById(g);try{d.contentWindow?(e.responseText=
d.contentWindow.document.body?d.contentWindow.document.body.innerHTML:null,e.responseXML=d.contentWindow.document.XMLDocument?d.contentWindow.document.XMLDocument:d.contentWindow.document):d.contentDocument&&(e.responseText=d.contentDocument.document.body?d.contentDocument.document.body.innerHTML:null,e.responseXML=d.contentDocument.document.XMLDocument?d.contentDocument.document.XMLDocument:d.contentDocument.document)}catch(l){c.handleError(a,e,null,l)}if(e||"timeout"==b){m=!0;var h;try{if(h="timeout"!=
b?"success":"error","error"!=h){var k=c.uploadHttpData(e,a.dataType);a.success&&a.success(k,h);a.global&&c.event.trigger("ajaxSuccess",[e,a])}else c.handleError(a,e,h)}catch(l){h="error",c.handleError(a,e,h,l)}a.global&&c.event.trigger("ajaxComplete",[e,a]);a.global&&!--c.active&&c.event.trigger("ajaxStop");a.complete&&a.complete(e,h);c(d).off();try{setTimeout(function(){c(d).remove();c(f).remove()},100)}catch(l){c.handleError(a,e,null,l)}e=null}}a=c.extend({},c.ajaxSettings,a);var b=(new Date).getTime(),
f=c.createUploadForm(b,a.fileElementId);a.data&&(f=c.addOtherRequestsToForm(f,a.data));c.createUploadIframe(b,a.secureuri);var g="jUploadFrame"+b,b="jUploadForm"+b;a.global&&!c.active++&&c.event.trigger("ajaxStart");var m=!1,e={};a.global&&c.event.trigger("ajaxSend",[e,a]);0<a.timeout&&setTimeout(function(){m||d("timeout")},a.timeout);try{var k=c("#"+b).attr({action:a.url,method:"POST",target:g});k.encoding?k.encoding="multipart/form-data":k.enctype="multipart/form-data";k.submit()}catch(n){c.handleError(a,
e,null,n)}window.attachEvent?document.getElementById(g).attachEvent("onload",d):document.getElementById(g).addEventListener("load",d,!1);return{abort:function(){}}},uploadHttpData:function(a,d){var b;b="xml"!=d&&d?a.responseText:a.responseXML;if("script"==d)c.globalEval(b);else if("json"==d){b=a.responseText;a=b.indexOf(">");0<=a&&(d=b.indexOf("<",a+1),0<=d&&(b=b.substring(a+1,d)));try{b=JSON.parse(b)}catch(f){c.handleError("Response data error.",b,null,f)}}else"html"==d&&c("<div>").html(b).evalScripts();
return b},handleError:function(a,c,b,f){console&&console.error&&console.error(a,c,b,f)}})})(jQuery);